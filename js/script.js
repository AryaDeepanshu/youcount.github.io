'use strict';var shareswitch=0,navState=[0,0],views=[],extraswitch=0,myLineChart2={},myLineChart3={},myLineChart4={},vids=5;if(!developmentMode)try{(window.top!==window.self||window.top.location!==window.self.location)&&(window.top.location=window.self.location)}catch(a){noConnection(a)}function idClickListener(a,c){document.getElementById(a).addEventListener('click',c)}function queryClickListener(a,c){var d=document.querySelectorAll(a);d.forEach(function(g){g.addEventListener('click',c)})}function fx(a){var c=document.getElementById(a),d=0,g=1,h=1;return fx.transition=function(m,o,p,q){for(var r=m,u=0;u<h;u++)setTimeout(function(){r+=+((o-d)/h),q(r)},50*(u+1))},fx.fadeIn=function(m){m=def(m,400),h=m/50,'none'===window.getComputedStyle(c).getPropertyValue('display')&&(c.style.display=c.dataset.fxDisplay?c.dataset.fxDisplay:'block',g=c.dataset.fxOpacity||+c.style.opacity||1,c.style.opacity=0,fx.transition(0,g,1,function(o){c.style.opacity=o},m))},fx.fadeOut=function(m){m=def(m,400),h=m/50,'none'!==window.getComputedStyle(c).getPropertyValue('display')&&(c.dataset.fxDisplay=window.getComputedStyle(c).getPropertyValue('display'),g=c.style.opacity?+c.style.opacity:1,c.dataset.fxOpacity=g,d=g,fx.transition(g,0,-1,function(o){c.style.opacity=o},m),setTimeout(function(){c.style.display='none',c.style.opacity=c.dataset.fxOpacity},m))},fx}var emailParts=['manas.khurana20','gmail','com','&#46;','&#64;'];document.getElementById('email').innerHTML=emailParts[0]+emailParts[4]+emailParts[1]+emailParts[3]+emailParts[2],document.getElementById('email').href='mailto:'+getText('email');var clickList=[['inputButton',function(){getValue()}],['fb',function(){window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(getText(document.querySelector('#pageUrl input'))),'_blank')}],['tw',function(){window.open('https://twitter.com/share?text='+getText('username')+' now has  '+actualCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')+' subscribers!&url= '+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&hashtags=YouCount','_blank')}],['lnkdIn',function(){window.open('https://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&title='+encodeURIComponent(channelname)+'\'s%20Live%20Subscriber%20Count&source=YouCount','_blank')}],['tb',function(){window.open('http://www.tumblr.com/share/link?url='+encodeURIComponent(getText(document.querySelector('#pageUrl input'))),'_blank')}],['rdit',function(){window.open('http://www.reddit.com/submit?url='+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&title='+encodeURIComponent(channelname)+'s%20Live%20Subscriber%20Count','_blank')}],['link',linkshare],['bg2',function(){isTutorialOn[0]?tutorial(3):(fx('pageUrl').fadeOut(250),fx('bg2').fadeOut(500))}]];clickList.forEach(function(a){idClickListener(a[0],a[1])}),queryClickListener('.suggest',function(a){if(a.target.dataset.id&&-1===['Loading.','Loading..','Loading...'].indexOf(a.target.innerHTML)){username=a.target.dataset.id;var c='https://www.googleapis.com/youtube/v3/channels?part=snippet&id='+a.target.dataset.id+'&fields=items/snippet&type=channel&maxResults=1&key=';isTutorialOn[0]&&tutorial(3),queryName(c)}}),['showextra','hideextra'].forEach(function(a){idClickListener(a,extrabutton)});function tutorial(a){navState[0]&&handleNavButtons(navState[0]),isTutorialOn[0]=1,isTutorialOn[1]=a+1,window.scrollTo(0,0);var c=0;switch(a){case 0:changeText('username',''),document.getElementById('input').style.zIndex='1004',document.getElementById('tutorial').style.display='block',c=document.getElementById('username').getBoundingClientRect().bottom,document.getElementById('tutorial').style.top=c+35+'px',document.getElementById('bg2').style.display='block',document.getElementById('tutStep1').style.display='block',document.getElementById('tutStep2').style.display='none',isLive||changeText('actualCount','Tutorial'),document.getElementById('tutorial').addEventListener('click',function(){1===isTutorialOn[1]&&document.getElementById('username').focus()});break;case 1:document.getElementById('tutStep1').style.display='none',document.getElementById('tutStep2').style.display='block',c=document.getElementById('username').getBoundingClientRect().bottom,document.getElementById('tutorial').style.top=c+35+'px';break;case 2:document.getElementById('tutStep1').style.display='none',document.getElementById('tutStep2').style.display='block',document.getElementById('suggest').style.zIndex='1004',c=document.getElementById('suggest').getBoundingClientRect().bottom,document.getElementById('tutorial').style.top=c+35+'px',document.getElementById('bg2').style.display='block';break;case 3:document.getElementById('tutorial').style.display='none',document.getElementById('bg2').style.display='none',document.getElementById('input').style.zIndex='50',document.getElementById('suggest').style.zIndex='51',changeText('username',channelname),isTutorialOn[0]=0,isTutorialOn[1]=0;break;default:isTutorialOn[0]=0,isTutorialOn[1]=0;}}isTutorialOn[0]&&tutorial(0);var tutorialSize={isChanging:!1,change:function change(){tutorialSize.isChanging=!0,tutorial(isTutorialOn[1]-1),setTimeout(function(){tutorialSize.isChanging=!1},100)}};window.onresize=function(){!tutorialSize.isChanging&&isTutorialOn[0]&&tutorialSize.change()};function shareFunc(a){var c=200;if(!(!0!==a&&2>shareswitch)){var d=document.querySelectorAll('.share');switch(shareswitch){case 0:shareswitch=1,d.forEach(function(g,h){setTimeout(function(){fx(g.id).fadeIn(c)},40*(h-1))}),setTimeout(function(){shareswitch=2},c+40*d.length);break;case 1:break;case 2:shareswitch=1,navState[0]=0,d.forEach(function(g){fx(g.id).fadeOut(c)}),setTimeout(function(){shareswitch=0},c+40*d.length);break;default:}}}queryClickListener('body',shareFunc);function handleNavButtons(a){if(!navState[1])if(0!==navState[0])switch(navState[1]=1,document.getElementById('bg1').style.height='100%',document.getElementById('bg1').classList.add('ball'),document.getElementById('mainPage').style.display='block',navState[0]===a?setTimeout(function(){navState=[0,0]},500):setTimeout(function(){navState=[0,0],handleNavButtons(a)},500),navState[0]){case 2:document.getElementById('helpArt').style.display='none',document.getElementById('helpArt').style.opacity='0',document.querySelector('.navButtonsCover[data-child="helpButton"]').style.backgroundColor='transparent';break;case 3:document.getElementById('codeArt').style.display='none',document.getElementById('codeArt').style.opacity='0',document.querySelector('.navButtonsCover[data-child="code"]').style.backgroundColor='transparent';break;default:}else switch(a){case 1:location.hash&&(location.href=location.href.split(location.hash)[0]),navState[0]=1;break;case 2:document.getElementById('bg1').classList.remove('ball'),document.querySelector('.navButtonsCover[data-child="helpButton"]').style.backgroundColor='rgba(0,0,0,0.5)',setTimeout(function(){fx('helpArt').fadeIn(200),document.getElementById('bg1').style.height='auto',document.getElementById('mainPage').style.display='none'},500),setTimeout(function(){navState[1]=0},1e3),navState=[2,1];break;case 3:document.getElementById('bg1').classList.remove('ball'),document.querySelector('.navButtonsCover[data-child="code"]').style.backgroundColor='rgba(0,0,0,0.5)',setTimeout(function(){fx('codeArt').fadeIn(200),document.getElementById('bg1').style.height='auto',document.getElementById('mainPage').style.display='none'},500),setTimeout(function(){navState[1]=0},1e3),navState=[3,1];break;case 4:shareFunc(!0),navState[0]=4;break;default:}}var usernameKeyUp=[!1,!1],usernameKeyUpInter=null;function usernameKeyUpFunc(){var a=getText('username');return internet?!a||-1<['Not Found!','Loading.','Loading..','Loading...','Refresh the page'].indexOf(a)?(document.getElementById('suggest').style.display='none',clearInterval(usernameKeyUpInter),usernameKeyUp=[!1,!1],void(isTutorialOn[0]&&tutorial(1))):void ajx('https://www.googleapis.com/youtube/v3/search?part=snippet&q='+encodeURIComponent(a)+'&type=channel&maxResults=5&relevanceLanguage=en&key='+getKey(),function(c){try{if(!c.items)return void noConnection('undef e.items in username keyup (script.js)',!0);if(1>c.pageInfo.totalResults)return;var d=document.querySelectorAll('.suggest'),g=document.querySelectorAll('.suggest div'),h=document.querySelectorAll('.suggestImg');d.forEach(function(m,o){m.style.display='block',m.dataset.id=c.items[o].snippet.channelId.trim()}),isTutorialOn[0]&&tutorial(2),g.forEach(function(m,o){try{m.dataset.id=c.items[o].snippet.channelId.trim(),changeText(m,c.items[o].snippet.title),h[o].style.visibility='hidden'}catch(p){noConnection('texs.forEach: '+p+' (script.js)',!0),d[o].style.display='none'}}),h.forEach(function(m,o){try{m.dataset.id=c.items[o].snippet.channelId.trim(),m.src=c.items[o].snippet.thumbnails.default.url,whenImageLoaded(m).then(function(){m.style.visibility='visible'})}catch(p){noConnection('imas.forEach: '+p+' (script.js)',!0),d[o].style.display='none'}})}catch(m){noConnection('suggest ajx: '+m+' (script.js)',!0)}},function(){noConnection('username keyup no ajx response (script.js)',!0)}):void changeText('username','Refresh the page')}function whenImageLoaded(a){return new Promise(function(c){a.addEventListener('load',c)})}document.getElementById('username').addEventListener('keyup',function(){usernameKeyUp[0]?usernameKeyUp[1]=!0:(usernameKeyUp[0]=!0,usernameKeyUp[1]=!0,document.getElementById('suggest').style.display='block',document.querySelectorAll('.suggest').forEach(function(a,c){0===c?(a.style.display='block',a.childNodes[0].style.visibility='hidden',loading(a.childNodes[1])):a.style.display='none'}),isTutorialOn[0]&&tutorial(2),usernameKeyUpInter=setInterval(function(){usernameKeyUp[1]&&(usernameKeyUpFunc(),usernameKeyUp[1]=!1)},1e3))}),loadingList=[],loadingInterval=null;function loading(a){a&&-1===loadingList.indexOf(a)?(!loadingList.length&&(loadingInterval=setInterval(function(){loading()},500)),changeText(a,'Loading.'),loadingList.push(a)):loadingList.length?loadingList=loadingList.filter(function(c){var g=['Loading.','Loading..','Loading...'],h=g.indexOf(getText(c));return 0===h||1===h?(changeText(c,g[h+1]),!0):2===h&&(changeText(c,g[0]),!0)}):clearInterval(loadingInterval)}function linkshare(){fx('pageUrl').fadeIn(250),fx('bg2').fadeIn(500),username&&location.hash.split('#!/')[1]||changeText(document.querySelector('#pageUrl input'),'https://youcount.github.io/')}for(var l=50;0<l;l--)views.push(l);function pushViews(a,c){ajx(a,function(d){views[c]=d.items[0].statistics.viewCount,c===2*vids-1&&upCharts()})}function extrabutton(){if(!username)tutorial(0);else if(0===firstload){if(!internet||notFound||isTutorialOn[0])return;loading('showextra');var a='https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id='+username+'&fields=items/contentDetails/relatedPlaylists/uploads&key='+getKey();try{ajx(a,function(c){if(!c.items[0].contentDetails.relatedPlaylists.uploads)return void noConnection('2. undef e.items[0].contentDetails.relatedPlaylists.uploads in extrabutton(script.js)');var d='https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId='+c.items[0].contentDetails.relatedPlaylists.uploads+'&maxResults=50&fields=items/snippet/resourceId/videoId&key='+getKey();ajx(d,function(g){if(!g.items)return void noConnection('3. undef e.items in extrabutton(script.js)');for(var m,h=0;g.items[h];h++)m='https://www.googleapis.com/youtube/v3/videos?part=statistics&id='+g.items[h].snippet.resourceId.videoId+'&fields=items/statistics/viewCount&key='+getKey(),pushViews(m,h);getScript('https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js',function(){isChart=1,fx('showextra').fadeOut(),document.getElementById('hideextra').style.display='block',document.getElementById('extraContent').style.display='block',extraswitch=1;for(var o=[],p=[],q=0;h<vids;q++)o[q]=views[q],p[q]='';var r={labels:p,datasets:[{label:'Views of last '+vids+' videos',fill:!1,borderColor:'rgba(255,50,50,0.5)',pointBorderColor:'rgba(255,50,50,0.5)',pointBackgroundColor:'rgba(255,50,50,1)',data:o}]};myLineChart2=new Chart(document.getElementById('myChart2').getContext('2d'),{type:'line',data:r,gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var u=[function(){for(var E=0,F=0;F<vids;F++)E+=+views[F];return E}(),function(){for(var E=0,F=vids;F<2*vids;F++)E+=+views[F];return E}()],w=[Math.floor(u[0]/vids),Math.floor(u[1]/vids)],y=['last '+vids+' videos','last to last '+vids+' videos'];myLineChart3=new Chart(document.getElementById('myChart3').getContext('2d'),{type:'bar',data:{labels:y,datasets:[{label:'Average Views',borderColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],backgroundColor:['rgba(50,50,255,0.2)','rgba(50,255,50,0.2)'],hoverBackgroundColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],data:w}]},gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var A=[u[0],u[1]],B=['last '+vids+' videos (total views)','last to last '+vids+' videos (total views)'];myLineChart4=new Chart(document.getElementById('myChart4').getContext('2d'),{type:'doughnut',data:{labels:B,datasets:[{label:'Total Views',borderColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],backgroundColor:['rgba(50,50,255,0.2)','rgba(50,255,50,0.2)'],hoverBackgroundColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],data:A}]},gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var D='https://www.googleapis.com/youtube/v3/channels?part=statistics&id='+username+'&fields=items/statistics(videoCount,viewCount)&key='+getKey();ajx(D,function(E){return E.items[0].statistics.videoCount&&E.items[0].statistics.viewCount?void(changeText(document.getElementById('totalVideos'),E.items[0].statistics.videoCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')),changeText(document.getElementById('totalViews'),E.items[0].statistics.viewCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,','))):void noConnection('4. undef b.items[0].statistics.videoCount or b.items[0].statistics.viewCount in extrabutton(script.js)')}),firstload=1,upCharts()})})},function(){noConnection('1. extrabutton no response from ajx (script.js)')})}catch(c){noConnection(c)}}else changeText('showextra','Show Stats'),0==extraswitch?(isChart=1,fx('showextra').fadeOut(),fx('hideextra').fadeIn(),document.getElementById('extraContent').style.display='block',extraswitch=1):(myLineChart1.destroy(),fx('showextra').fadeIn(),fx('hideextra').fadeOut(100),document.getElementById('extraContent').style.display='none',extraswitch=0,isChart=0)}function upCharts(){if(!firstload)return void noConnection('upCharts was called before firstload==1',!0);vids=+getText('vids'),25<vids&&changeText('vids',vids=25);for(var a=0,c=0,d=0;d<vids;d++)myLineChart2.data.labels[d]='',myLineChart2.data.datasets[0].data[d]=views[d],a+=+views[d];for(d=vids;d<2*vids;d++)c+=+views[d];myLineChart2.data.labels.splice(vids),myLineChart2.data.datasets[0].data.splice(vids),myLineChart2.data.datasets[0].label='Views of last '+vids+' videos',myLineChart3.data.labels=['last '+vids+' videos','last to last '+vids+' videos'],myLineChart3.data.datasets[0].data[0]=Math.floor(a/vids),myLineChart3.data.datasets[0].data[1]=Math.floor(c/vids),myLineChart4.data.labels=['last '+vids+' videos (total views)','last to last '+vids+' videos (total views)'],myLineChart4.data.datasets[0].data[0]=a,myLineChart4.data.datasets[0].data[1]=c,myLineChart2.update(),myLineChart3.update(),myLineChart4.update()}internet&&document.querySelectorAll('.share').forEach(function(a){a.style.backgroundImage='url(/images/social.png)'});
